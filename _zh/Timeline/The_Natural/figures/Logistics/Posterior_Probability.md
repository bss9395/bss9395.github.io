

```
# 条件概率
概率链乘关系式：
ℙ(E₁)    ℙ(E₁ ∧ E₂)                                ℙ(E₁)    ℙ(E₁ ∧ E₂)    ℙ(E₁ ∧ E₂ ∧ E₃)
───── × ─────────── = ℙ(E₁ ∧ E₂)                   ───── × ─────────── × ──────────────── = ℙ(E₁ ∧ E₂ ∧ E₃)
 ℙ(𝟙)     ℙ(E₁)                                     ℙ(𝟙)     ℙ(E₁)         ℙ(E₁ ∧ E₂)

N(E₁)/N(𝟙)    N(E₁ ∧ E₂)/N(𝟙)                       N(E₁)/N(𝟙)    N(E₁ ∧ E₂)/N(𝟙)   N(E₁ ∧ E₂ ∧ E₃)/N(𝟙)
────────── × ──────────────── = N(E₁ ∧ E₂)/N(𝟙)    ─────────── × ─────────────── × ──────────────────── = N(E₁ ∧ E₂ ∧ E₃)/N(𝟙)
     1             N(E₁)/N(𝟙)                            1             N(E₁)/N(𝟙)        N(E₁ ∧ E₂)/N(𝟙)

事件发生在逻辑上的先后次序，相关于事件发生在时间上的先后次序，但并不等同。
条件概率ℙ(E₂ | E₁)表示在事件E₁发生的条件下，事件E₂发生的概率。
条件概率ℙ(E₃ | E₂ ∧ E₁)表示在事件E₁与E₂都发生的条件下，事件E₃发生的概率。
             ℙ(E₁ ∧ E₂)    N(E₁ ∧ E₂)                                ℙ(E₁ ∧ E₂ ∧ E₃)    N(E₁ ∧ E₂ ∧ E₃)
ℙ(E₂ | E₁) ≡ ─────────── = ———————————             ℙ(E₃ | E₁ ∧ E₂) ≡ ──────────────── = ————————————————
              ℙ(E₁)         N(E₁)                                     ℙ(E₁ ∧ E₂)         N(E₁ ∧ E₂)

# 条件概率的链乘形式/概率的乘法原理
ℙ(E₁) × ℙ(E₂ | E₁) = ℙ(E₁ ∧ E₂)                  ℙ(E₁) × ℙ(E₂ | E₁) × ℙ(E₃ | E₁ ∧ E₂) = ℙ(E₁ ∧ E₂ ∧ E₃)
```


```
# 多个事件的独立性
条件概率ℙ(E₃ | E₁ ∧ E₂)意味着事件E₁与事件E₂之交集事件E₁ ∧ E₂的发生，将会改变事件E₃发生的概率。
若事件E₁与事件E₂之交集事件E₁ ∧ E₂的发生不影响事件E₃发生的概率，则事件E₁ ∧ E₂与事件E₃彼此独立。
此时ℙ(E₃) = ℙ(E₃ | E₁ ∧ E₂)
并且ℙ(E₁ ∧ E₂) = ℙ(E₁ ∧ E₂ | E₃)
因此ℙ(E₁ ∧ E₂ ∧ E₃) = ℙ(E₃) × ℙ(E₁ ∧ E₂ | E₃) = ℙ(E₁ ∧ E₂) × ℙ(E₃ | E₁ ∧ E₂) = ℙ(E₁ ∧ E₂) × ℙ(E₃)

三个事件之间两两独立，不保证三个事件之交集事件发生的概率，等值于三个事件各自发生的概率之乘积。
ℙ(E₁ ∧ E₂) = ℙ(E₁) × ℙ(E₂)
ℙ(E₂ ∧ E₃) = ℙ(E₂) × ℙ(E₃)
ℙ(E₃ ∧ E₁) = ℙ(E₃) × ℙ(E₁)
ℙ(E₁ ∧ E₂ ∧ E₃) = ℙ(E₁) × ℙ(E₂) × ℙ(E₃)

多个事件之间相互独立，须保证任意事件的交集事件发生的概率，等值于单个事件各自发生的概率之乘积。
ℙ(Eᵢ ∧ Eⱼ) = ℙ(Eᵢ) × ℙ(Eⱼ)
ℙ(Eᵢ ∧ Eⱼ ∧ ... ∧ Eₖ) = ℙ(Eᵢ) × ℙ(Eⱼ) × ... × ℙ(Eₖ)
```


```
# 全概率公式的递推形式
   ℙ(F)
 = ℙ(𝟙 ∧ F)
 = ℙ((E₁ ∨ ¬E₁) ∧ F)
 = ℙ((E₁ ∧ F) ∨ (¬E₁ ∧ F))
 = ℙ(E₁ ∧ F) + ℙ(¬E₁ ∧ F) - ℙ((E₁ ∧ F) ∧ (¬E₁ ∧ F))
 = ℙ(E₁ ∧ F) + ℙ(¬E₁ ∧ F) - ℙ(𝟘)
1= ℙ(E₁ ∧ F) + ℙ(¬E₁ ∧ F)
2= ℙ(E₂ ∧ E₁ ∧ F) + ℙ(¬E₂ ∧ E₁ ∧ F) + ℙ(E₂ ∧ ¬E₁ ∧ F) + ℙ(¬E₂ ∧ ¬E₁ ∧ F)

1 ℙ(F)
= ℙ(E₁ ∧ F) + ℙ(¬E₁ ∧ F)
= ℙ(E₁) × ℙ(F | E₁) + ℙ(¬E₁) × ℙ(F | ¬E₁)

2 ℙ(F)
= ℙ(E₂ ∧ E₁ ∧ F) + ℙ(¬E₂ ∧ E₁ ∧ F) + ℙ(E₂ ∧ ¬E₁ ∧ F) + ℙ(¬E₂ ∧ ¬E₁ ∧ F)
= ℙ(E₂ ∧ E₁) × ℙ(F | E₂ ∧ E₁) + ℙ(¬E₂ ∧ E₁) × ℙ(F | ¬E₂ ∧ E₁) + ℙ(E₂ ∧ ¬E₁) × ℙ(F | E₂ ∧ ¬E₁) + ℙ(¬E₂ ∧ ¬E₁) × ℙ(F | ¬E₂∧ ¬E₁)

# 全概率公式的普适形式
事件F为复杂事件，事件Eᵢ为子事件空间之一，交集事件F ∧ Eᵢ为子复杂事件；
子事件空间之间没有交集彼此互斥，所有子事件空间形成对全集事件的全覆盖。
全概率公式表明复杂事件发生的概率，就等同于其所有彼此互斥的子复杂事件发生的概率之总和；
也等同于所有子事件空间发生的概率，与子复杂事件在其子事件空间中发生的概率之乘积之总和。
  ℙ(F)
= ∑ᵢ[ℙ(F ∧ Eᵢ)]
= ∑ᵢ[ℙ(Eᵢ) × ℙ(F | Eᵢ)]      ⌘ Eᵢ ∧ Eⱼ = 𝟘 并且 E₁ ∨ E₂ ∨ ... ∨ Eₙ = 𝟙
= ∑ᵢ[ℙ(Eᵢ) × ℙ(F ∧ Eᵢ)/ℙ(Eᵢ)]
= ∑ᵢ[N(Eᵢ)/N(𝟙) × N(F ∧ Eᵢ)/N(Eᵢ)]
```


```
# 后验概率的典型形式
无条件概率ℙ(E)，可表示在没有先验事件发生的条件下，事件E发生的概率；
条件概率ℙ(E | F)，可表示在有先验事件F发生的条件下，事件E发生的概率；
无条件概率ℙ(E)与条件概率ℙ(E | F)，在本质上均表示的是事件E发生的概率。
逻辑上的先后次序，无条件概率ℙ(E)出现在先，条件概率ℙ(E | F)出现在后；
因此ℙ(E)相对于ℙ(E | F)为先验概率，并且ℙ(E | F)相对于ℙ(E)为后验概率；
同理ℙ(¬E)相对于ℙ(¬E | F)为先验概率，且ℙ(F | ¬E)相对于ℙ(F)为后验概率。
在条件概率ℙ(F | E)与ℙ(E | F)中，事件F与E两者发生的先后次序互为颠倒；
从形式上可认为条件概率ℙ(F | E)与条件概率ℙ(E | F)两者互为逆条件概率。
           ℙ(E ∧ F)   ℙ(E ∧ F)
ℙ(E | F) = ──────── = ────────────────────
           ℙ(F)       ℙ(E ∧ F) + ℙ(¬E ∧ F)

	   ℙ(E) × ℙ(F | E)
ℙ(E | F) = ───────────────────────────────────
	   ℙ(E) × ℙ(F | E) + ℙ(¬E) × ℙ(F | ¬E)

# 后验概率的普适形式
            ℙ(Eₙ ∧ F)      ℙ(Eₙ ∧ F)
ℙ(Eₙ | F) = ───────── = ──────────────    ⌘ Eᵢ ∧ Eⱼ = 𝟘 并且 E₁ ∨ E₂ ∨ ... ∨ Eₙ = 𝟙
            ℙ(F)        ∑ᵢ[ℙ(Eᵢ ∧ F)]

            ℙ(Eₙ) × ℙ(F | Eₙ)
ℙ(Eₙ | F) = ─────────────────────         ⌘ Eᵢ ∧ Eⱼ = 𝟘 并且 E₁ ∨ E₂ ∨ ... ∨ Eₙ = 𝟙
            ∑ᵢ[ℙ(Eᵢ) × ℙ(F | Eᵢ)]

# 多事件后验概率的递推形式
                 ℙ(E₁ ∧ E₂ ∧ F)   ℙ(E₁ ∧ E₂ ∧ F)
ℙ(E₁ ∧ E₂ | F) = —————————————— = ——————————————————————————————————————————————————————————————————————
                 ℙ(F)             ℙ(E₁ ∧ E₂ ∧ F) + ℙ(E₁ ∧ ¬E₂ ∧ F) + ℙ(¬E₁ ∧ E₂ ∧ F) + ℙ(¬E₁ ∧ ¬E₂ ∧ F)

                 ℙ(E₁ ∧ E₂) × ℙ(F | E₁ ∧ E₂)
	       = —————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
                 ℙ(E₁ ∧ E₂) × ℙ(F | E₁ ∧ E₂) + ℙ(E₁ ∧ ¬E₂) × ℙ(F | E₁ ∧ ¬E₂) + ℙ(¬E₁ ∧ E₂) × ℙ(F | ¬E₁ ∧ E₂) + ℙ(¬E₁ ∧ ¬E₂) × ℙ(F | ¬E₁ ∧ ¬E₂)

                       ℙ(E₁ ∧ E₂ ∧ E₃ ∧ F)    ℙ(E₁ ∧ E₂ ∧ E₃ ∧ F)
ℙ(E₁ ∧ E₂ ∧ E₃ | F) = ———————————————————— = ————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
                       ℙ(F)                   ℙ(E₁ ∧ E₂ ∧ E₃ ∧ F) + ℙ(E₁ ∧ E₂ ∧ ¬E₃ ∧ F) + ℙ(E₁ ∧ ¬E₂ ∧ E₃ ∧ F) + ℙ(E₁ ∧ ¬E₂ ∧ ¬E₃ ∧ F) + ℙ(¬E₁ ∧ E₂ ∧ E₃ ∧ F) + ℙ(¬E₁ ∧ E₂ ∧ ¬E₃ ∧ F) + ℙ(¬E₁ ∧ ¬E₂ ∧ E₃ ∧ F) + ℙ(¬E₁ ∧ ¬E₂ ∧ ¬E₃ ∧ F)

                      ℙ(E₁ ∧ E₂ ∧ E₃) × ℙ(F | E₁ ∧ E₂ ∧ E₃)
                    = ————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
		      ℙ(E₁ ∧ E₂ ∧ E₃) × ℙ(F | E₁ ∧ E₂ ∧ E₃) + ℙ(E₁ ∧ E₂ ∧ ¬E₃) × ℙ(F | E₁ ∧ E₂ ∧ ¬E₃) + ℙ(E₁ ∧ ¬E₂ ∧ E₃) × ℙ(F | E₁ ∧ ¬E₂ ∧ E₃) + ℙ(E₁ ∧ ¬E₂ ∧ ¬E₃) × ℙ(F | E₁ ∧ ¬E₂ ∧ ¬E₃) + ℙ(¬E₁ ∧ E₂ ∧ E₃) × ℙ(F | ¬E₁ ∧ E₂ ∧ E₃) + ℙ(¬E₁ ∧ E₂ ∧ ¬E₃) × ℙ(F | ¬E₁ ∧ E₂ ∧ ¬E₃) + ℙ(¬E₁ ∧ ¬E₂ ∧ E₃) × ℙ(F | ¬E₁ ∧ ¬E₂ ∧ E₃) + ℙ(¬E₁ ∧ ¬E₂ ∧ ¬E₃) × ℙ(F | ¬E₁ ∧ ¬E₂ ∧ ¬E₃)

# 多条件后验概率的递推形式
                 ℙ(E ∧ F₁ ∧ F₂)   ℙ(E ∧ F₁ ∧ F₂)
ℙ(E | F₁ ∧ F₂) = —————————————— = ————————————————————————————————
                 ℙ(F₁ ∧ F₂)       ℙ(E ∧ F₁ ∧ F₂) + ℙ(¬E ∧ F₁ ∧ F₂)

		 ℙ(E) × ℙ(F₁ ∧ F₂ | E)
	       = ———————————————————————————————————————————————      ⌘ 当事件F₁与事件F₂彼此独立发生时，未必有ℙ(F₁ ∧ F₂ | E) = ℙ(F₁ | E) × ℙ(F₂ | E)
	         ℙ(E) × ℙ(F₁ ∧ F₂ | E) + ℙ(¬E) × ℙ(F₁ ∧ F₂ | ¬E)

                       ℙ(E ∧ F₁ ∧ F₂ ∧ F₃)   ℙ(E ∧ F₁ ∧ F₂ ∧ F₃)
ℙ(E | F₁ ∧ F₂ ∧ F₃) = ———————————————————— = ———————————————————————————————————————————
                       ℙ(F₁ ∧ F₂ ∧ F₃)       ℙ(E ∧ F₁ ∧ F₂ ∧ F₃) + ℙ(¬E ∧ F₁ ∧ F₂ ∧ F₃)

                      ℙ(E) × ℙ(F₁ ∧ F₂ ∧ F₃ | E)
		    = —————————————————————————————————————————————————————————
                      ℙ(E) × ℙ(F₁ ∧ F₂ ∧ F₃ | E) + ℙ(¬E) × ℙ(F₁ ∧ F₂ ∧ F₃ | ¬E)

现在考察投掷两颗骰子，根据计数原理中的乘法原理，其事件空间总共包含N(𝟙) = 6 × 6 = 36个等可能的样本点。
1,1  1,2  1,3  1,4  1,5  1,6
2,1  2,2  2,3  2,4  2,5  2,6
3,1  3,2  3,3  3,4  3,5  3,6
4,1  4,2  4,3  4,4  4,5  4,6
5,1  5,2  5,3  5,4  5,5  5,6
6,1  6,2  6,3  6,4  6,5  6,6
随机变量b为第一颗骰子的点数，随机变量c为第二颗骰子的点数，随机变量b与随机变量彼此独立发生互不相干涉。
随机变量d为两颗骰子的点数之和，根据计数原理中的加法原理，将其次数累加可得到随机变量d的离散概率分布列。
d = b + c  ┆   1     2     3     4     5     6     7     8     9     10    11    12    13    14    15    ⋯
    N(d)   ┆   0     1     2     3     4     5     6     5     4     3     2     1     0     0     0     ⋯
    ℙ(d)   ┆  0/36  1/36  2/36  3/36  4/36  5/36  6/36  5/36  4/36  3/36  2/36  1/36  0/36  0/36  0/36   ⋯
事件 E为两颗骰子的点数之和小于等于6，ℙ( E) = (1+2+3+4+5)/36 = 15/36。
事件¬E为两颗骰子的点数之和大于等于7，ℙ(¬E) = (6+5+4+3+2+1)/36 = 21/36。

事件F₁为两颗骰子的点数之和大于等于4小于等于7，ℙ(F₁) = (3+4+5+6)/36 = 18/36。
事件F₂为两颗骰子的点数之和大于等于9以及等于5或者7，ℙ(F₂) = (4+6+4+3+2+1)/36 = 20/36。
事件F₁ ∧ F₂为两颗骰子的点数之和或者等于5或者等于7，ℙ(F₁ ∧ F₂) = (4+6)/36 = 10/36。
因此事件F₁与事件F₂彼此独立发生，ℙ(F₁ ∧ F₂) = ℙ(F₁) × ℙ(F₂)。

事件F₁ ∧  E为两颗骰子的点数之和大于等于4小于等于6，ℙ(F₁ ∧ E) = (3+4+5)/36 = 12/36。
事件F₂ ∧  E为两颗骰子的点数之和等于5，ℙ(F₂ ∧ E) = (4)/36 = 4/36。
事件F₁ ∧  F₂ ∧ E为两颗骰子的点数之和等于5，ℙ(F₁ ∧ F₂ ∧ E) = (4)/36 = 4/36。
在事件E发生的条件下，事件F₁发生的概率为ℙ(F₁ | E) = ℙ(F₁ ∧ E)/ℙ(E) = (12/36)/(15/36) = 12/15。
在事件E发生的条件下，事件F₂发生的概率为ℙ(F₂ | E) = ℙ(F₂ ∧ E)/ℙ(E) = ( 4/36)/(15/36) =  4/15。
在事件E发生的条件下，事件F₁与事件F₂同时发生的概率为ℙ(F₁ ∧ F₂ | E) = ℙ(F₁ ∧ F₂ ∧ E)/ℙ(E) = (4/36)/(15/36) = 4/15。
因此在事件E发生的条件下，事件F₁与事件F₂并非彼此独立，ℙ(F₁ ∧ F₂ | E) ≠ ℙ(F₁ | E) × ℙ(F₂ | E)。

事件F₁ ∧ ¬E为两颗骰子的点数之和等于7，ℙ(F₁ ∧ ¬E) = (6)/36 = 6/36。
事件F₂ ∧ ¬E为两颗骰子的点数之和等于7以及大于等于9，ℙ(F₂ ∧ ¬E) = (6+4+3+2+1)/36 = 16/36。
在事件¬E发生的条件下，事件F₁发生的概率为ℙ(F₁ | ¬E) = ℙ(F₁ ∧ ¬E)/ℙ(¬E) = (6/36)/(21/36) = 6/21。
在事件¬E发生的条件下，事件F₂发生的概率为ℙ(F₂ | ¬E) = ℙ(F₂ ∧ ¬E)/ℙ(¬E) = (16/36)/(21/36) = 16/21。
在事件F₁ ∧ F₂发生的条件下，事件E发生的概率为ℙ(E | F₁ ∧ F₂) = ℙ(F₁ ∧ F₂ ∧ E)/ℙ(F₁ ∧ F₂) = (4/36)/(10/36) = 4/10。


[1/ℙ(E | F₁ ∧ F₂) - 1] ≠ [1/ℙ(E) - 1] × [ℙ(F₁ | ¬E)/ℙ(F₁ | E)] × [ℙ(F₂ | ¬E)/ℙ(F₂ | E)]
6/4 = [1/(4/10) - 1] ≠ [1/(15/36) - 1] × [(6/21)/(12/15)] × [(16/21)/(4/15)] = 10/7
因此后验概率与条件概率并非等同，ℙ(E | F₂ | F₁) = ℙ(E | F₁ | F₂) ≠ ℙ(E | F₁ ∧ F₂)
```
